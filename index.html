<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Usage stats widget</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="lrhw-widget"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      (function (window, document, scriptTag, globalVar, paramsKey, cdnUrl) {

        // Inizilization of the global variable if it doesn't exist
        window[globalVar] =
          window[globalVar] ||
          function () {
            window[globalVar][paramsKey] = window[globalVar][paramsKey] || {};
            Object.assign(window[globalVar][paramsKey], arguments[0] || {});
          };

        // Creating the script element
        const scriptElement = document.createElement(scriptTag);
        scriptElement.id = globalVar;
        scriptElement.src = cdnUrl;
        scriptElement.type = "module";
        scriptElement.defer = true;

        // Error handling for the script
        scriptElement.onerror = function () {
          console.error(`Failed to load script ${scriptElement.src}`);
        };

        // Insert the script element before the first script tag
        const firstScript = document.getElementsByTagName(scriptTag)[0];
        firstScript.parentNode.insertBefore(scriptElement, firstScript);
      })(
        window,
        document,
        "script",
        "lrhw",
        "parameters",
        "https://cdn.jsdelivr.net/gh/lareferencia/lareferencia-historic-widget@0.0.1/dist/historic-widget.js"
      );
	  
	  // Configuration for the widget
      window["lrhw"]({
        widget_div_id: "lrhw-widget",
        repositories_list: [
          // {
          //   label:
          //     "Repositorio Institucional de la Universidad Carlos III de Madrid",
          //   value: "opendoar::912",
          // },
          // {
          //   label:
          //     "Repositorio insitucional del insituto Madrile√±o de Estudios Avanzados en Nanociencia",
          //   value: "opendoar::10070",
          // },
          // {
          //   label:
          //     "Biblioteca Virtual del Sistema Sanitario Publico de Andalucia (BV-SSPA)",
          //   value: "opendoar::2582",
          // },
          // {
          //   label: "Repositorio dummy SIN ESTADISTICAS",
          //   value: "opendoar::2636",
          // },
          {
            label: "Portal Regional LA Referencia",
            value: "SITEID::1",
          },
          {
            label: "RECOLECTA",
            value: "SITEID::64"
          },
          {
            label: "SILO",
            value: "SITEID::58"
          },
          {
            label: "RRAAE",
            value: "SITEID::61"
          },
          {
            label: "OASISBR",
            value: "SITEID::63"
          },
          {
            label: "PRICILA",
            value: "SITEID::151"
          },
          {
            label: "ACCES",
            value: "SITEID::57"
          },
          {
            label: "ALICIA",
            value: "SITEID::60"
          },
          {
            label: "REDCOL",
            value: "SITEID::62"
          },
          {
            label: "Kimuk",
            value: "SITEID::55"
          }
         
        ],

        default_repository: {
            label: "Portal Regional LA Referencia",
            value: "SITEID::59",
          },

        scope_labels: {
          N: "Nodo Nacional",
        },
      });
    </script>
  </body>
</html>
